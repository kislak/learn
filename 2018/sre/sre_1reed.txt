- Introduction

tenets of sre

SRE team is responsible for the
  availability,
  latency,
  performance,
  efficiency,
  change management,
  monitoring,
  emergency response,
  capacity planning

conduct a postmortem
blame-free postmortem culture

Pursuing Maximum Change Velocity Without Violating a Service’s SLO

There are three kinds of valid monitoring output:
alert
ticket
logging

Reliability is a function of mean time to failure (MTTF) and mean time to repair (MTTR)
  R = mttf/mttr

machine - rack - row - cluster - datacenter - campus
borg - distributed cluster operating system
bns - borg name service (name ->  ip:port)
hdfs - Hadoop Distributed File System
Google File System -> Colossus (BigTable, Spanner, Blobstore)
Global Software Load Balancer (GSLB)
  dns
  service
  RPC
// name, {BNS list -> capacity (RPS)}

The Chubby lock service provides - Paxos protocol for asynchronous Consensus

monitoring:
Set up alerting for acute problems.
Compare behavior: did a software update make the server faster?
Examine how resource consumption behavior evolves over time, which is essential for capacity planning.
Stubby - gRPC

- Principles
- 3 Embracing risk (принять(охватывать, видеть) риски)

99% - availability
availability = uptime/update+downtime
availability = 200/404

types of error effects (sign up vs 1 feature)

cost vs profit
  if we were to build +9 in availability
    what would incremental increase in revenue be?

falling between 0.01% and 1%

error budget

Hope is not a strategy

- 4 Service Level Objectives
SLI
  what user want (from intuition)
  quantitative measure of some aspect of the level of service

  request latency
  error rate
  system throughput
  availability
  durability (storage)
  correctness

- 5 Eliminating Toil
  operational work = toil
  Manual
  Repetitive
  Automatable
  Tactical
  No enduring value
  O(n) with service growth

  invent more, toil less.

- 6 Monitoring Distributed Systems
  monitoring
    Collecting, processing, aggregating, and displaying real-time quantitative data about a system
  White-box monitoring
  Black-box monitoring
  Dashboard
  Alert
  Root cause
  Node and machine
  Push
    any change


  monitor
    analyze long-term trends
    comparing(time/group)
    alerting
    building dashboards
    Conducting ad hoc retrospective analysis (i.e., debugging)

The four golden signals of monitoring are
 latency,
 traffic,
 errors,
 saturation (memory, i/o, cpu)

To remedy the situation, the team used a three-pronged approach

- 7 The Evolution of Automation at Google
value
  consistency
  platform (infrastracture)
  faster repair (mean time to repare MTTR)
  faster action
  time saving

meta-software - software to act on software

flaky tests
Service-Oriented Architecture (SOA)
  service owners would be responsible for creating an Admin Server to handle cluster turnup/turndown RPCs
  each team would provide the contract (API) that the turnup automation needed

- 8 Release Engineering
  building and delivering software

tools
  source code management
  compilers
  build configuration languages
  automated build tools
  package managers
  installers

skills
  development
  configuration management
  test integration
  system administration
  customer support

philosophy
  self-service model
  high velocity
  hermetic builds
  enforcement of policies and procedures (pipelines)

define release processes
define release process policies

- 9 Simplicity
The price of reliability is the pursuit of the utmost simplicity.

stability vs agility
minimizing accidental complexit
  essential complexity and accidental complexity

minimal api (encapsulation)
modularity
small release

Part III. Practices
maslow:

            product         (27: reliable product launches at scale)
          development       (23: critical state, 24: cron, 25: pipeline, 26: data integrity)
        capacity planning   (18: se in sre, 19: LB frontend, 20: LB in datacenter, 21: handling overload, 22: cascading failure)
      testing release       (17: testing for reliability)
    root cause analysis     (15: learn from failure, 16: tracking outage)
  incident response         (11: on-call, 12: troubleshoot, 13: emergency, 14: incidents)
monitoring                  (10: time-series data)

monitoring with prometeus
  https://www.safaribooksonline.com/videos/kubernetes-and-prometheus/9781492037378/9781492037378-video319658
  the beginning of a beautiful friendship
  four golden signals
    https://landing.google.com/sre/sre-book/chapters/monitoring-distributed-systems/
    latency
    traffic
    errors
    saturation
  USE (Brendan Gregg)
    utilization
    saturation
    errors
  RED (Tom Wilkie)
    request rate
    request error
    request duration
